{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://data.cambeerfestival.app/festivals-schema.json",
  "title": "Festivals Configuration Schema",
  "description": "JSON Schema for Cambridge Beer Festival app configuration (data/festivals.json)",
  "type": "object",
  "required": ["festivals", "default_festival_id", "version", "last_updated"],
  "properties": {
    "festivals": {
      "type": "array",
      "description": "Array of festival entries",
      "minItems": 1,
      "items": {
        "$ref": "#/definitions/festival"
      }
    },
    "default_festival_id": {
      "type": "string",
      "description": "ID of the default festival to show on app launch",
      "pattern": "^[a-z0-9-]+$",
      "examples": ["cbf2025"]
    },
    "version": {
      "type": "string",
      "description": "Schema version (semver)",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "examples": ["1.0.0"]
    },
    "last_updated": {
      "type": "string",
      "description": "ISO 8601 timestamp of when the configuration was last updated",
      "format": "date-time",
      "examples": ["2025-11-29T00:00:00Z"]
    }
  },
  "definitions": {
    "festival": {
      "type": "object",
      "description": "A beer festival entry with metadata and data URLs",
      "required": ["id", "name", "available_beverage_types", "data_base_url", "is_active"],
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique festival identifier",
          "pattern": "^[a-z0-9-]+$",
          "examples": ["cbf2025", "cbfw2025"]
        },
        "name": {
          "type": "string",
          "description": "Full festival name",
          "minLength": 1,
          "examples": ["Cambridge Beer Festival 2025"]
        },
        "hashtag": {
          "type": "string",
          "description": "Social media hashtag",
          "pattern": "^#[a-zA-Z0-9_]+$",
          "examples": ["#cbf2025"]
        },
        "start_date": {
          "type": "string",
          "description": "Festival start date (ISO 8601 date)",
          "format": "date",
          "examples": ["2025-05-19"]
        },
        "end_date": {
          "type": "string",
          "description": "Festival end date (ISO 8601 date)",
          "format": "date",
          "examples": ["2025-05-24"]
        },
        "location": {
          "type": "string",
          "description": "Venue name and city",
          "examples": ["Jesus Green, Cambridge"]
        },
        "address": {
          "type": "string",
          "description": "Full postal address",
          "examples": ["Jesus Green, Cambridge CB5 8BA"]
        },
        "latitude": {
          "type": "number",
          "description": "Venue latitude",
          "minimum": -90,
          "maximum": 90,
          "examples": [52.2119]
        },
        "longitude": {
          "type": "number",
          "description": "Venue longitude",
          "minimum": -180,
          "maximum": 180,
          "examples": [0.1220]
        },
        "description": {
          "type": "string",
          "description": "Festival description",
          "examples": ["The 53rd Cambridge Beer Festival..."]
        },
        "website_url": {
          "type": "string",
          "description": "Festival website URL",
          "format": "uri",
          "examples": ["https://www.cambridgebeerfestival.com"]
        },
        "hours": {
          "type": "object",
          "description": "Opening hours by day of the week",
          "additionalProperties": {
            "type": "string",
            "pattern": "^\\d{2}:\\d{2} - \\d{2}:\\d{2}$"
          },
          "examples": [{"Monday": "17:00 - 23:00", "Tuesday": "12:00 - 23:00"}]
        },
        "available_beverage_types": {
          "type": "array",
          "description": "List of beverage types available at this festival",
          "minItems": 1,
          "items": {
            "type": "string",
            "examples": ["beer", "cider", "perry", "mead", "wine", "international-beer", "low-no"]
          }
        },
        "data_base_url": {
          "type": "string",
          "description": "Base URL for fetching beverage data. Can be absolute (https://...) or relative (/festivalId). Relative URLs are resolved against the base URL where festivals.json was fetched from.",
          "examples": ["/cbf2025", "https://data.cambeerfestival.app/cbf2025"]
        },
        "is_active": {
          "type": "boolean",
          "description": "Whether this festival is currently active"
        }
      }
    }
  }
}

